# OmniAgent 简化实现文档说明

## 1. 工作流引擎模块 (`src/core/workflow/mod.rs`)
**位置**: 第104行
**简化说明**: 工作流步骤执行中的依赖关系处理被简化实现
**具体函数**:
- `execute_workflow_steps()` 函数 (第97-125行)

## 2. 决策引擎模块 (`src/core/decision/mod.rs`)
**位置**: 第24行, 第77行, 第80行, 第114行
**简化说明**: 决策规则条件仅为字符串匹配，决策逻辑过于简单
**具体函数**:
- `DecisionRule` 结构体的 `condition` 字段 (第24行)
- `make_decision()` 函数中的简化决策逻辑 (第77行)
- `make_decision()` 函数中查找规则的简化实现 (第80行)
- `matches_context()` 函数中的简化匹配实现 (第114-118行)

## 3. LLM服务模块 (`src/services/llm/mod.rs`)
**位置**: 第114-119行
**简化说明**: 令牌计算使用简化的词数估算方式
**具体函数**:
- `calculate_tokens()` 函数 (第114-119行)

## 4. 安全管理模块 (`src/services/security/mod.rs`)
**位置**: 第135-139行
**简化说明**: 密码验证使用明文比较而非哈希验证
**具体函数**:
- `authenticate()` 函数中的简化密码验证 (第135-139行)

## 5. 增强版工具执行引擎 (`src/services/tools/enhanced_engine.rs`)
**位置**: 文件头部注释第1行
**简化说明**: 整个模块被标记为简化实现
**具体函数**:
- 整个 `EnhancedToolExecutionEngine` 模块的8阶段生命周期实现需要完善

## 6. LLM模块 (`src/llm/mod.rs`)
**位置**: 第142-177行
**简化说明**: 模拟处理逻辑过于简单，仅根据关键词返回模拟响应
**具体函数**:
- `mock_process()` 函数 (第142-177行)

## 7. 主程序入口 (`src/main.rs`)
**位置**: 第110-123行, 第137-150行, 第339-357行
**简化说明**: MCP工具和A2A智能体路由使用关键词简单匹配，智能体构建失败时使用简化模式启动
**具体函数**:
- `try_mcp_tools()` 函数中的关键词匹配策略 (第110-123行)
- `try_a2a_agents()` 函数中的关键词匹配策略 (第137-150行)
- 主函数中的简化智能体构建处理 (第339-357行)

## 8. 智能路由器模块 (`src/core/router/mod.rs`)
**位置**: 文件头部注释第1行, 第33-53行
**简化说明**: 整个模块为简化版，使用简单的关键词匹配进行路由
**具体函数**:
- `route_message()` 函数中的简化路由逻辑 (第30-53行)

## 9. 能力管理器模块 (`src/core/capabilities/mod.rs`)
**位置**: 文件头部注释第1行
**简化说明**: 整个模块被标记为简化版，仅实现基础能力注册功能

## 10. 状态管理器模块 (`src/core/state/mod.rs`)
**位置**: 文件头部注释第1行
**简化说明**: 整个模块被标记为简化版，仅实现基础对话缓冲功能

## 11. 工具执行引擎模块 (`src/services/tools/mod.rs`)
**位置**: 第37行
**简化说明**: 为向后兼容保留的简化版工具执行引擎
**具体函数**:
- `ToolExecutionEngine` 结构体及其方法

## 12. REST API模块 (`src/ui/api/mod.rs`)
**位置**: 文件头部注释第1行, 第41行
**简化说明**: 整个模块为简化版，状态管理简单化
**具体函数**:
- `AppState` 结构体简化实现 (第41-45行)
- 所有API处理函数

## 13. 协议适配器模块 (`src/integrations/adapters/mod.rs`)
**位置**: 文件头部注释第1行
**简化说明**: 整个模块为简化版，仅实现基础适配器管理功能

## 14. 内存服务模块 (`src/services/memory/mod.rs`)
**位置**: 文件头部注释第1行, 第28行, 第30-35行
**简化说明**: 整个模块为简化版，令牌计算使用字符估算，摘要生成简单截断
**具体函数**:
- `compress_context()` 函数中的令牌计算 (第28行)
- `compress_context()` 函数中的摘要生成 (第30-35行)

## 15. 集成测试模块 (`tests/end_to_end_test.rs`)
**位置**: 第47-49行
**简化说明**: Claude provider的base_url修改处理被标记为简化处理
**具体函数**:
- 测试代码中对base_url设置的简化处理注释 (第47-49行)

这些简化实现需要在后续优化中重点关注，以提升系统功能完整性和性能表现。